<?xml version="1.0"?>
<!-- **********************************************************************-->
<!-- Copyright 2013-2025                                                   -->
<!-- Nicholas Long, Mitch Keller, Steven Schlicker                         -->
<!--                                                                       -->
<!-- This file is part of Active Calculus Multivariable.                   -->
<!--                                                                       -->
<!-- Permission is granted to copy, distribute and/or modify this document -->
<!-- under the terms of the Creative Commons BY-NC-SA license.  The work   -->
<!-- may be used for free by any party so long as attribution is given to  -->
<!-- the author(s), the work and its derivatives are used in the spirit of -->
<!-- "share and share alike"; no party may sell this work or any of its    -->
<!-- derivatives for profit.  All trademarks are the registered marks of   -->
<!-- their respective owners.                                              -->
<!-- **********************************************************************-->
<section xml:id="S-MV-Functions" xmlns:xi="http://www.w3.org/2001/XInclude">
  <title>Functions of Several Variables</title>
  
    <objectives>
        <ul>
          <li>
            <p>
              What is a function of several variables?  What do we mean by the domain of a function of several variables?
            </p>
          </li>

          <li>
            <p>
              What is a trace of a function of two variables? What does a trace tell us about a function?
            </p>
          </li>

          <li>
            <p>
              What is a level curve of a function of two variables? What does a level curve tell us about a function?
            </p>
          </li>
        </ul>
    </objectives>

    <introduction> 
    <p>
      For much of your study of algebra, precalculus, and calculus you have been focused on working with functions that have a scalar input and a scalar output, like <m>y=f(x)</m>. In <xref ref="C_VVF"/>, we used vector valued functions of one variable as our first case of multivariable functions. Vector valued functions of one variable have a single scalar input and an output corresponding to multiple variables that we either organized as parametric functions (<m>x(t)</m>, <m>y(t)</m>, and <m>z(t)</m>) or as a vector output, <m>\vr(t)=\langle x(t),y(t),z(t) \rangle</m>. Our work in <xref ref="C_VVF" /> was very focused on paths in space and the motion of an object on these paths. This narrow focus was because we had just one direction to move (and stay on our path). We worked with vector valued functions of one variable as our first new class of functions because the calculus of these object was relatively easy. We applied limits, derivatives, and integrals to these functions componentwise, but we saw how useful a combination of vector tools and calculus measurements was for describing many features of vector valued functions of one variable and their graphs as paths in space. 
    </p>
  
    <p>
      Many problems involve a much larger space of inputs and outputs. For instance, when studying weather patterns and behavior it is useful to measure temperature or atmospheric pressure. Both temperature and pressure are scalar measurements (measured by a single number) that will vary over three dimensions (north/south, east/west, and over elevation). Temperature can be given by a function with a location in three dimensions as the input and the temperature at that location (a scalar) as an output. Wind direction and strength are also very important when working with weather patterns. Wind is measured with a vector (magnitude and direction) and also varies with location in a three dimensional space. So wind would be given by a function with a location in space as the input and a vector as the output. We would call both the temperature and the wind functions <term>functions of several variables</term> because each of these functions has multiple scalar inputs. We will look at the calculus of multivariable functions with scalar outputs (like temperature and pressure) in the next couple of chapters and will look at studying functions with multivariable inputs and outputs in <xref ref="C_Vector"/>.
    </p>
    <p>
      In <xref ref="C_VVF"/>, all of the applications and analogies were centered around an object moving along a curve in space. When working with functions of several variables, we will want to use a few different types of functions for our applications and examples because of the possibilities between conceptual relationships between inputs and outputs. For instance, the first type of example we will consider is thinking of the elevation or height of land as being a function of map coordinates. In this case, the input and output are connected to make the surface and have the same units. In other words the input and outputs are each the same type of measurement and would be easily understood by the plot of a surface. 
    </p>
    <p>
      Our example of temperature above gives a different kind of interpretation where the output is a different kind of measurement than the inputs. For instance, think of a function whose input is the (x,y) location on a heated metal plate and the output is the temperature of the metal plate at this location. In this case, the input is thought of as a point or location and the output is a measure of thermal energy at that location. The inputs and outputs are different kinds of measurements, but a plot of the different temperature values across the different (x,y) locations would still visually make sense. 
    </p>
    <p>
      We can also consider a function that describes the horizontal distance traveled by a arrow before the arrow hits the ground as determined by the angle at which the arrow is shot and the initial speed of the arrow. In this case, the inputs to our function are an angle and a speed where as the output is a distance (horizontal displacement). In this case, the units and types of measurements for the inputs and outputs are all quite different and a plot of the corresponding surface of displacement, angle, and speed values would be a more abstract visual representation as compared to the temperature and elevation examples. 
    </p>
    <!-- <p>
      Throughout our mathematical careers we have studied functions of a single variable. We define a function of one variable as a rule that assigns exactly one output to each input. We analyze these functions by looking at their graphs, calculating limits, differentiating, integrating, and more. Functions of several variables will be the main focus of Chapters 10 and 11, where we will analyze these functions by looking at their graphs, calculating limits, differentiating, integrating, and more. We will see that many of the ideas from single variable calculus translate well to functions of several variables, but we will have to make some adjustments as well. In this chapter we introduce functions of several variables and then discuss some of the tools (vectors and vector-valued functions) that will help us understand and analyze functions of several variables. 
    </p> -->
    <!-- This preview activity is about getting students used to evaluating the function of several variables. I think this needs to be less generic and an introduction to one of the functions we will use as examples and applications throughout this chapter. Don't know that I care which one. -->
    <exploration xml:id="PA-9-1">
      <statement>
       <p>
          Suppose you invest money in an account that pays 5% interest compounded continuously. If you invest <m>P</m> dollars in the account, the amount <m>A</m> of money in the account after <m>t</m> years is given by 
          <me>
            A = Pe^{0.05t}.
          </me>
        </p>

        <p>
          The variables <m>P</m> and <m>t</m> are independent of each other, so using functional notation we write
          <me>
           A(P,t) = Pe^{0.05t}.
          </me>
          <ol marker="a.">
            <li>
              <p>
                Find the amount of money in the account after 7 years if you originally invest 1000 dollars. 
              </p>
            </li>

            <li>
              <p>
                Evaluate <m>A(5000,8)</m>. Explain in words what this calculation represents.
              </p>
            </li>

            <li>
              <p>
                Now consider only the situation where the amount invested is fixed at 1000 dollars. Calculate the amount of money in the account after <m>t</m> years as indicated in <xref ref="T-9-1-Fixed-Investment">Table</xref>. Round payments to the nearest penny.

                <table xml:id="T-9-1-Fixed-Investment">
                  <title>Amount of money in an account with an initial investment of 1000 dollars.</title>
                  <tabular bottom="minor" top="minor">
                    <row bottom="medium">
                      <cell>Duration (in years)</cell>
                      <cell> <nbsp/><nbsp/>2 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>3 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>4 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>5 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>6 <nbsp/><nbsp/></cell>
                    </row>
                  
                    <row>
                      <cell>Amount (dollars)</cell>
                      <cell/>
                      <cell/>
                      <cell/>
                      <cell/>
                      <cell/>
                    </row>
                 
                  </tabular>
                </table>

              </p>
            </li>

            <li>
              <p>
                Now consider the situation where we want to know the amount of money in the account after 10 years given various initial investments. Calculate the amount of money in the account as indicated in <xref ref="T-9-1-Payments-years">Table</xref>. Round payments to the nearest penny.

                <table xml:id="T-9-1-Payments-years">
                  <title>Amount of money in an account after 10 years.</title>
                  <tabular bottom="minor" top="minor">
                    <row bottom="medium">
                      <cell>Initial investment (dollars)</cell>
                      <cell><nbsp/><nbsp/> 500 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>1000 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>5000 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>7500 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>10000 <nbsp/><nbsp/></cell>
                    </row>
                    <row>
                      <cell>Amount (dollars)</cell>
                      <cell/>
                      <cell/>
                      <cell/>
                      <cell/>
                      <cell/>
                    </row>
                  </tabular>
                </table>

              </p>
            </li>

            <li>
              <p>
                Describe as best you can the combinations of initial investments and time that result in an account containing $10,000.
              </p>
            </li>
          </ol>
        </p>
      </statement>

      <answer>
        <p>
          <ol marker="a.">
           <li>
              <p>
                <m>A(1000,7) = $1,419.07</m>.
              </p>
            </li>
  
            <li>
              <p>
                <m>A(5000,8) = $7,459.12</m>. If you invest $5,000 in an account earning 5% interest compounded continuously, at the end of 8 years you will have $7,459.12.  
              </p>
            </li>
  
            <li>
              <p>
                <table>
                  <title>Amount of money in an account with an initial investment of 1000 dollars.</title>
                  <tabular bottom="minor" top="minor">
                    <row bottom="medium">
                      <cell>Duration (in years)</cell>
                      <cell><nbsp/><nbsp/>2 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>3 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>4 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>5 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>6 <nbsp/><nbsp/></cell>
                    </row>
                    <row>
                      <cell>Amount (dollars)</cell>
                      <cell> <nbsp/><nbsp/>1,105.17 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>1,161.83 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>1,221.40 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>1,284.03 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>1,349.86 <nbsp/><nbsp/></cell>
                    </row>
                  </tabular>
                </table> 
              </p>
            </li>
  
            <li>
              <p>
                <table>
                  <title>Amount of money in an account after 10 years.</title>
                  <tabular bottom="minor" top="minor">
                    <row bottom="medium">
                      <cell>Initial investment (dollars)</cell>
                      <cell><nbsp/><nbsp/>500 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>1000 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>5000 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>7500 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>10000 <nbsp/><nbsp/></cell>
                    </row>
                    <row>
                      <cell>Amount (dollars)</cell>
                      <cell><nbsp/><nbsp/>824.36  <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>1648.72 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>8243.61 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>12365.41 <nbsp/><nbsp/></cell>
                      <cell><nbsp/><nbsp/>16487.21 <nbsp/><nbsp/></cell>
                    </row>
                  </tabular>
                </table>
              </p>
            </li>
  
            <li>
              <p>
                As the amount of money initially invested increases, the length in time for the investment to reach $10,000 is less and less. Using Table 9.1.2, if the initial investment is around $6,000, it will take 10 years for the investment to reach $10,000.  
              </p>
            </li>
          </ol>
        </p>
      </answer>

      <solution>
        <p>
          <ol marker="a.">
            <li>
              <m>A(1000,7) = 1000e^{0.05(7)} = \$1,419.07</m>.
            </li>

            <li>
              <p>
                <m>A(5000,8) = 5000e^{0.05(8)} = \$7,459.12</m>.
              </p>
            </li>

            <li>
              <p>
                <m>A(1000,2) = 1000e^{0.05(2)} = \$1,105.17</m>.
              </p>
              <p>
                <m>A(1000,3) = 1000e^{0.05(3)} = \$1,161.83</m>.
              </p>
              <p>
                <m>A(1000,4) = 1000e^{0.05(4)} = \$1,221.40</m>.
              </p>
              <p>
                <m>A(1000,5) = 1000e^{0.05(5)} = \$1,284.03</m>.
              </p>
              <p>
                <m>A(1000,6) = 1000e^{0.05(6)} = \$1,349.86</m>.
              </p>
            </li>

            <li>
              <p>
                <m>A(500,10) = 500e^{0.05(10)} = \$824.36</m>.
              </p>
              <p>
                <m>A(1000,10) = 1000e^{0.05(10)} = \$1,648.72</m>.
              </p>
              <p>
                <m>A(5000,10) = 5000e^{0.05(10)} = \$8,243.61</m>.
              </p>
              <p>
                <m>A(7500,10) = 7500e^{0.05(10)} = \$12,365.41</m>.
              </p>
              <p>
                <m>A(10000,10) = 10000e^{0.05(10)} = \$16,487.21</m>.
              </p>
            </li>

            <li>
              <p>
                <m>10,000=xe^{0.05(10)}</m>. <m>x=$6065.31</m>.
              </p>
            </li>
          </ol>
        </p>
      </solution> 
    </exploration>   
   </introduction>

  <subsection>
    <title>Functions of Several Variables</title>
    <p>
      Up to this point we have been concerned with functions of a single variable. What defined such a function is that every input in the domain produced a unique output in the range. We saw similar behavior in <xref ref="PA-9-1">Preview Activity</xref>, where each pair <m>(P,t)</m> of inputs produces a unique output <m>A(P,t)</m>. Additionally, the two variables <m>P</m> and <m>t</m> had no real relation to each other. That is, we could choose any value of <m>P</m> without considering what value <m>t</m> might have, and we could select any value of <m>t</m> to use without regard to what value <m>P</m> might have. For that reason we say that the variables <m>t</m> and <m>P</m> are <em>independent</em> of each other. Thus, we call <m>A = A(P,t)</m> a function of the two independent variables <m>P</m> and <m>t</m>. This is the key idea in defining a function of two independent variables. 
    </p>

    <definition>
      <statement>
        <p>
          A <term>function <m>f</m> of two independent variables</term><idx><h>function</h><h>of two variables</h></idx> is a rule that assigns to each ordered pair <m>(x,y)</m> in some set <m>D</m> exactly one real number <m>f(x,y)</m>.
        </p>
      </statement>
    </definition>

    <p>
      There is, of course, no reason to restrict ourselves to functions of only two variables<mdash/>we can use any number of variables we like. For example,
      <me>
        f(x,y,z) = x^2 - 2xz + \cos(y)
      </me>
      defines <m>f</m> as a function of the three variables <m>x</m>, <m>y</m>, and <m>z</m>. In general, a function of <m>n</m> independent variables is a rule that assigns to an ordered <m>n</m>-tuple <m>(x_1, x_2, \ldots, x_n)</m> in some set <m>D</m> exactly one real number.
    </p>

    <p>
      As with functions of a single variable, it is important to understand the set of inputs for which the function is defined.
    </p>

    <definition>
      <statement>
        <p>
          The <term>domain</term><idx><h>function</h><h>domain</h></idx> of a function <m>f</m> is the set of all inputs at which the function is defined.
        </p>
        <p>
          The <term>range</term><idx><h>function</h><h>range</h></idx> of a function <m>f</m> is the set of all actual outputs for the function.
        </p>
      </statement>
    </definition>
    <p>
      Recall common ways for scalar functions to <em>NOT</em> be defined for a particular input include:
      <ul>
        <li>dividing by zero</li>
        <li>taking the square root of negative numbers</li>
        <li>restricted domains from other functions like <m>\arcsin</m> or logarithms</li>
      </ul>
    </p>
    <example>
      <p>
        In this example, we will look at the domain and range of a couple of functions. Our first function will be given by <m>f(x,y)=\sqrt{xy}</m>. For the domain of <m>f</m> we can only use <m>(x,y)</m>-inputs where the square root of <m>xy</m> is non-negative. We will use set-builder notation to describe this domain. The domain of <m>f</m> is <m>\{(x,y)\in\mathbb{R}^2|xy \geq 0\}</m>. This notation is read as <q>the set of <m>(x,y)</m> coordinates in the cartesian plane such that x times y is greater than zero</q>. Set builder notation is very flexible because this follows the form <m>\{\text{kind of objects}|\text{conditions on objects}\}</m>. The symbol <m>|</m> is read as <q>such that</q>. Note that the domain of <m>f</m> does not say that <m>x</m> and <m>y</m> are both positive (quadrant I), but rather that the product of <m>x</m> amd <m>y</m> needs to be positive (quadrants I and III). 
      </p>
      <figure xml:id="domainmv1">
        <caption>A plot of the domain of <m>f(x,y)=\sqrt{xy}</m></caption>
        <image width="55%" label="img-domainmv1">
          <shortdescription>A plot highlighting the first and third quadrants which includes both coordinate axes</shortdescription>
          <description><p>A plot highlighting the first and third quadrants which includes both coordinate axes</p></description>
          <sageplot>
            plot1=polygon([(0,0),(2,0),(2,2),(0,2),(0,0)],color="yellow",ticks=[[],[]],xmin=-1.1,xmax=1.1,ymin=-1.1,ymax=1.1,gridlines=True,aspect_ratio=1,axes=true,axes_labels=["$x$","$y$"])
            plot1+=polygon([(0,0),(-2,0),(-2,-2),(0,-2),(0,0)],color="yellow")
            plot1        
          </sageplot>
        </image>
      </figure>
      <p>
        When we consider the range of <m>f(x,y)=\sqrt{xy}</m> we need to think about what values can actually be outputs of <m>f</m>. You may be tempted to say that outputs are scalars so the range should be <m>\mathbb{R}</m>, all real numbers. There is no way to get a negative output for <m>f</m> so all not all real numbers are actual outputs of <m>f</m>. Instead, the range of <m>f</m> will be the interval <m>[0,\infty)</m> because those are the values you can actually get as an output from <m>f</m>.
      </p>
      <p>
        For our second example, we will look at the domain and range of <m>g(x,y)=\frac{\arcsin(y)}{2x}</m>. First we need to recall the domain and range of the arcsin function are <m>[-1,1]</m> and <m>[-\frac{\pi}{2},\frac{\pi}{2}]</m>, respectively. So we will only be allowed to use inputs with <m>y</m>-values in the interval <m>[-1,1]</m> and <m>x\neq0</m>. Thus the domain of <m>g</m> is <m>\{(x,y)\in\mathbb{R}^2 | x \neq 0 \text{ and } -1 \leq y \leq 1\}</m>.
      </p>
      <figure xml:id="domainmv2">
        <caption>A plot of the domain of <m>g(x,y)=\frac{\arcsin(y)}{2x}</m></caption>
        <image width="55%" label="img-domainmv2">
          <shortdescription>A plot highlighting the first and third quadrants which includes both coordinate axes</shortdescription>
          <description><p>A plot highlighting the first and third quadrants which includes both coordinate axes</p></description>
          <sageplot>
            plot2=polygon([(2.5,-1),(2.5,1),(-2.5,1),(-2.5,-1)],color="yellow",xmin=-2.1,xmax=2.1,ymin=-2.1,ymax=2.1,gridlines=True,aspect_ratio=1,axes=true,axes_labels=["$x$","$y$"])
            plot2+=line([(0,1),(0,-1)],linestyle="--",thickness=3)
            plot2       
          </sageplot>
        </image>
      </figure>
      <p>
        The range of arcsin is <m>[-\frac{\pi}{2},\frac{\pi}{2}]</m> but since the output of <m>g</m> will be <m>\frac{\arcsin(y)}{2x}</m>, the range of <m>g</m> will be <m>\mathbb{R}</m>, all real numbers. The input <m>(\frac{\pi}{2},\frac{1}{2a})</m> will be sent to <m>a</m> for any value of <m>a\neq 0</m> and <m>g(0,1)=0</m>. 
      </p>
    </example>
    <activity xml:id="A-9-1-1">
    <introduction>
      <p>
        Identify the domain and range of each of the following functions. Draw a picture of each domain in the <m>xy</m>-plane.
      </p>
    </introduction>
    <task>
      <statement>
        <p>
          <m>f(x,y) = x^2+y^2</m>
        </p>
      </statement>
      <answer>
        <p>
          <m>x:(-\infty,\infty)</m> <m>y:(-\infty,\infty)</m>
        </p>
      </answer>
      <solution>
        <p>
          There are no x or y values that make the function undefined, so the domain is all ordered pairs of real numbers.
        </p>
      </solution>
    </task>
    <task>
      <statement>
        <p>
          <m>f(x,y) = \sqrt{x^2+y^2}</m>
        </p>
      </statement>
      <answer>
        <p>
          <m>x:(-\infty,\infty)</m> <m>y:(-\infty,\infty)</m> 
        </p>
      </answer>
      <solution>
        <p>
          The square root function is undefined for inputs that result in a negative radicand. Since <m>x^{2}+y{2} \geq 0</m>, there are no <m>(x,y)</m> that will result in a negative radicand. Therefore, the domain is all real ordered pairs of real numbers.
        </p>
      </solution>
    </task>
    <task>
      <statement>
        <p>
          <m>Q(x,y) = \frac{x+y}{x^2-y^2}</m>
        </p>
      </statement>
      <answer>
        <p>
          <m>x \neq y</m> and <m>x \neq - y</m>
        </p>
      </answer>
      <solution>
        <p>
          The rational function is undefined when the denominator is zero or undefined. The rational function is defined when <m>x^{2}-y^{2} = (x-y)(x+y) \neq 0</m>. So <m>(x-y) \neq 0</m> and <m>(x+y) \neq 0</m>. Therefore, <m>x \neq y</m> and <m>x \neq - y</m>.
        </p>
      </solution>
    </task>
    <task>
      <statement>
        <p>
          <m>s(x,y) = \frac{1}{\sqrt{1-xy^2}}</m>
        </p>
      </statement>
      <answer>
        <p>
          <m>xy^{2} \leq 1</m> or <m>x \leq \frac{1}{y^{2}}</m>
        </p>
      </answer>
      <solution>
        <p>
          The rational function is undefined then the denominator is zero or undefined. The denominator is only defined when <m>1-xy^{2} \geq 0</m>. Therefore, <m>xy^{2} \leq 1</m> or <m>x \leq \frac{1}{y^{2}}</m>. But the denominator cannot be equal to zero, so the domain is all ordered pairs such that <m>x \lt \frac{1}{y^{2}}</m>.
        </p>
      </solution>
    </task>
  </activity>
</subsection>

<subsection>
  <title>Representing Functions of Two Variables</title>
  <p>
    You have already seen one representation of a function of several variables, specifically, the algebraic notation like <m>f(x,y)=\sqrt{xy}</m> which shows an algebraic rule to get the output of the function <m>f</m> for given input values <m>x</m> and <m>y</m>. These kinds of representations are very convenient to use with algebraic rules for derivatives or for computing the output of the function given particular inputs. The drawback to this representation is that you need a lot of intuition about the type of function being used to understand how the output is changing over a range of values. 
  </p>
  <p>
    One of the techniques we use to study functions of one variable is to create a table of values. We can do the same for functions of two variables, except that our tables will have to allow us to keep track of both input variables. We can do this with a 2-dimensional table, where we list the <m>x</m>-values down the first column and the <m>y</m>-values across the first row. 
  </p> 
  <p>
    As an example, suppose we launch a projectile, using a golf club, a cannon, or some other device, from ground level. Under ideal conditions (ignoring wind resistance, spin, or any other forces except the force of gravity) the horizontal distance the object will travel depends on the initial velocity <m>x</m> the object is given, and the angle <m>y</m> at which it is launched. If we let <m>f</m> represent the horizontal distance the object travels, then <m>f</m> is a function of the two variables <m>x</m> and <m>y</m>, and we represent <m>f</m> in functional notation by
    <me>
      f(x,y) = \frac{x^2 \sin(2 y)}{g},
    </me>
    where <m>g</m> is the acceleration due to gravity. (Note that <m>g</m> is constant, 9.8 meters per second squared or 32 feet per second squared. ref to derivation?) To create a table of values for <m>f</m>, we list the <m>x</m>-values down the first column and the <m>y</m>-values across the first row. The value <m>f(x,y)</m> is then displayed in the location where the <m>x</m> row intersects the <m>y</m> column, as shown in <xref ref="T-9-1-range">Table</xref> (where we measure <m>x</m> in feet per second and <m>y</m> in radians). For example, <m>f(75,0.8)=175.7</m> is shown in the table by looking at the value in the row with <m>x=75</m> and column corresponding to <m>y=0.8</m>.
  </p>
  <table xml:id="T-9-1-range">
  <title>Values of <m>f(x,y) = \frac{x^2 \sin(2y)}{g}</m> with <m>g=32 ft/s^2</m></title>
  <tabular halign="center" >
    <row>
      <cell><m>x\backslash y</m></cell>
      <cell bottom="medium"><m>0.4</m></cell>
      <cell bottom="medium"><m>0.6</m></cell>
      <cell bottom="medium"><m>0.8</m></cell>
      <cell bottom="medium"><m>1.0</m></cell>
      <cell bottom="medium"><m>1.2</m></cell>
    </row>
    
    <row>
      <cell right="medium">50</cell>
      <cell>56.0</cell>
      <cell>72.8</cell>
      <cell>78.1</cell>
      <cell>71.0</cell>
      <cell/>
    </row>
    <row>
      <cell right="medium">75</cell>
      <cell/>
      <cell>163.8</cell>
      <cell>175.7</cell>
      <cell>159.8</cell>
      <cell>118.7</cell>
    </row>
      <row>
        <cell right="medium">100</cell>
        <cell>224.2</cell>
        <cell>291.3</cell>
        <cell>312.4</cell>
        <cell>284.2</cell>
        <cell>211.1</cell>
      </row>
      <row>
        <cell right="medium">125</cell>
        <cell>350.3</cell>
        <cell>455.1</cell>
        <cell/>
        <cell>444.0</cell>
        <cell>329.8</cell>
      </row>
      <row>
        <cell right="medium">150</cell>
        <cell>504.4</cell>
        <cell>655.3</cell>
        <cell>702.8</cell>
        <cell>639.3</cell>
        <cell>474.9</cell>
      </row>
      <row>
        <cell right="medium">175</cell>
        <cell>686.5</cell>
        <cell>892.0</cell>
        <cell>956.6</cell>
        <cell>870.2</cell>
        <cell/>
      </row>
    </tabular>
  </table>
  <activity xml:id="A-9-1-2">
    <statement>
      <p>
        Complete <xref ref="T-9-1-range">Table</xref> by filling in the missing values of the function <m>f</m>. Round entries to the nearest tenth. 
      </p>
    </statement>
    <answer>
      <p>
        <m>f(50,1.2) = 52.8</m>.
      </p>
      <p>
        <m>f(75,0.4) = 126.1</m>.
      </p>
      <p>
        <m>f(125,0.8) = 488.1</m>.
      </p>
      <p>
        <m>f(175,1.4) = 320.6</m>.
      </p>
      <p>
        <m>f(250,0.6) = 1820.4</m>.
      </p>
    </answer>
    <solution>
      <p>
        <m>f(50,1.2) = \frac{(50)^{2} \sin(2*1.2)}{9.8} = 52.8</m>.
      </p>
      <p>
        <m>f(75,0.4) = \frac{(75)^{2} \sin(2*0.4)}{9.8} = 126.1</m>.
      </p>
      <p>
        <m>f(125,0.8) = \frac{(125)^{2} \sin(2*0.8)}{9.8} = 488.1</m>.
      </p>
      <p>
        <m>f(175,1.4) = \frac{(175)^{2} \sin(2*1.4)}{9.8} = 320.6</m>.
      </p>
      <p>
        <m>f(250,0.6) = \frac{(250)^{2} \sin(2*0.6)}{9.8} = 1820.4</m>.
      </p>
    </solution>
  </activity>
  <p>
    Representing a function with a table should reinforce the idea that each of the two independent values for the input variables will have a corresponding output value, but you probably struggled to gain insight into the relationship described by the function when looking at a large table of values. Additionally, the table is only useful for the input values selected in the rows and columns. While this may seem like a very limited use case, many applied problems involve tables like this because an algebraic function can be extremely difficult to find for every case and it can be very expensive to test many input values to obtain the corresponding output values. You likely have already used spreadsheets to organize information in a multivariable setting like this. 
  </p>
  <p>
    If <m>f</m> is a function of a single variable <m>x</m>, then we define the graph of <m>f</m> to be the set of points of the form <m>(x,f(x))</m>, where <m>x</m> is in the domain of <m>f</m>. We then plot these points using the coordinate axes in order to visualize the graph. We can do a similar thing with functions of several variables. <xref ref="T-9-1-range">Table</xref> identifies points of the form <m>(x,y,f(x,y))</m>, and we define the graph of <m>f</m> to be the set of these points.
  </p>
  <definition>
    <statement>
      <p>
        The <term>graph</term><idx><h>function</h><h>graph</h></idx> of a function <m>f = f(x,y)</m> is the set of points of the form <m>(x,y,f(x,y))</m>, where the point <m>(x,y)</m> is in the domain of <m>f</m>.
      </p>
    </statement>
  </definition>
  <p>
    We also often refer to the graph of a function <m>f</m> of two variables as the <em>surface</em><idx><h>function</h><h>surface</h></idx> generated by <m>f</m>. Points of  the form <m>(x,y,f(x,y))</m> are in three dimensions. If we consider the graph of the distance function defined by <m>f(x,y) = \frac{x^2 \sin(2y)}{g}</m>, then the function <m>f</m> is continuous in both variables. So, when these points are plotted in the right hand coordinate system, the points connect to form a surface in 3-space. The graph of the distance function <m>f</m> is shown in <xref ref="zfnxy">Figure</xref>.
    </p>

    <!-- <figure xml:id="F-9-1-range">
      <caption>The distance surface.</caption>
      <image width="50%" source="images/fig_9_1_range"/>
    </figure> -->
    <figure xml:id="zfnxy">
      <caption>The distance surface given by <m>z=f(x,y) = \frac{x^2 \sin(2y)}{g}</m></caption>
      <interactive title="interactive-zfnxy" platform="sage" width="85%" aspect="1:1">
        <slate surface="sage">
          var('x,y')
          g(x,y)=x^2*sin(2*y)/32
          plot10=plot3d(g,(x,0,200),(y,0,pi/2),color="gray",aspect_ratio=[1,100,0.15],mesh=True,opacity=0.8,plot_points=21)
          show(plot10,viewpoint=[[-0.792,0.3576,0.4949],84.75],camera_position=[-200.2301,-189.6884,234.3567])
        </slate>
      </interactive>
    </figure>
    <p>
      There are many graphing tools available for drawing three-dimensional surfaces as indicated in the Preface (see Links to interactive graphics in Features of the Text) and almost all of the in-text three dimensional graphics are generated by Sage. Since we will be able to visualize graphs of functions of two independent variables (using plots in three dimensions), but not functions of more than two variables, we will primarily deal with functions of two variables in this text. It is important to note, however, that the techniques we develop apply to functions of any number of variables and we will highlight these extensions to higher dimensions in <xref ref="S-MV-HD" />.
    </p>
    <p>
      You may have noticed that we used the notation <m>z=f(x,y)</m> in the caption to <xref ref="zfnxy"/>, which is explicitly saying that we are viewing the <m>z</m>-coordinate in our plot as the output of our function <m>f</m>. In other words only <m>(x,y,z)</m> points of the form <m>(x,y,f(x,y))</m> will be a part of the graph plotted. In some situations it may be advantageous to express a graph of interest using a function with some of roles of input and output in a different configuration. For instance, the surface shown in <xref ref="yfnxz"/> will not be able to be expressed with the <m>z</m>-coordinate at a function of the <m>x</m>- and <m>y</m>-coordinates because there will need to be more than one <m>z</m> coordinate associated to inputs like <m>(x,y)=(0,1)</m> (as highlighted by the red points in the figure). The points on this surface can be expressed with <m>y</m> as a function of <m>x</m> an <m>y</m>, specifically <m>y=g(x,z) = \frac{x^2}{5}+z^2</m>. We will typically look at examples where <m>z</m> is expressed as a function of <m>x</m> and <m>y</m>, but you should think carefully if it will be advantageous to consider a different coordinate views. 
    </p>
    <figure xml:id="yfnxz">
      <caption>The surface given by <m>y=g(x,z) = \frac{x^2}{5}+z^2</m></caption>
      <interactive title="interactive-yfnxz" platform="sage" width="85%" aspect="1:1">
        <slate surface="sage">
          var('x,y,z,r,t')
          g(x,z)=x^2/5+z^2
          plot11=parametric_plot3d((r*cos(t)/sqrt(5),(r*cos(t))^2+(r*sin(t))^2,r*sin(t)),(r,0,2),(t,0,2*pi),opacity=0.8,mesh=True,plot_points=31,color="gray")
          plot11+=line([(0,1,-2),(0,1,2)],color="red",thickness=2)
          plot11+=point((0,1,1),color="red",size=30)
          plot11+=point((0,1,-1),color="red",size=30)
          show(plot11,viewpoint=[[-0.1883,-0.5499,-0.8137],148.86],camera_position=[4.4087,7.6827,2.8914])
        </slate>
      </interactive>
    </figure>
  </subsection>
  <subsection>
    <title>Traces</title>
    <p>
      When we study functions of several variables we are often interested in how each individual variable affects the function in and of itself. In <xref ref="PA-9-1">Preview Activity</xref>, we saw that the amount of money in an account depends on the amount initially invested and the duration of the investment. However, if we fix the initial investment, the amount of money in the account depends only on the duration of the investment, and if we set the duration of the investment constant, then the amount of money in the account depends only on the initial investment. This idea of keeping one variable constant while we allow the other to change will be an important tool for us when studying functions of several variables.
    </p>

    <p>
      As another example, consider again the distance function <m>f</m> defined by
      <me>
        f(x,y) = \frac{x^2 \sin(2y)}{g}
      </me>
      where <m>x</m> is the initial velocity of an object in feet per second, <m>y</m> is the launch angle in radians, and <m>g</m> is the acceleration due to gravity (32 feet per second squared). If we hold the launch angle constant at <m>y=0.6</m> radians, we can consider <m>f</m> a function of the initial velocity alone. In this case we have
      <me>
        f(x) = \frac{x^2}{32}\sin(2\cdot 0.6)
      </me>
    </p>
    <figure xml:id="trace2">
      <caption>A plot of <m>f(x,0.6) = \frac{x^2}{32}\sin(2\cdot 0.6)</m> on left and <m>f(150,y) = \frac{150^2 \sin(2y)}{32}</m> on right</caption>
      <image width="100%" xml:id="img-trace2">
        <sageplot>
          var('x,y')
          g(x,y)=x^2*sin(2*y)/32
          plot12=plot(g(x,0.6),(x,0,200),color="red",thickness=2,gridlines=True,ymin=0,ymax=1200,axes_labels=["$x$","$z$"],frame=True)
          plot13=plot(g(150,y),(y,0,pi/2),color="blue",thickness=2,gridlines=True,ymin=0,ymax=1200,axes_labels=["$y$","$z$"],frame=True)
          plot14=graphics_array([plot12,plot13],1,2)
          plot14
        </sageplot>
      </image>
    </figure>
    <p>
      We can plot this curve on the surface by tracing out the points on the surface when <m>y = 0.6</m>, as shown at left in <xref ref="trace1">Figure</xref>. The formula clearly shows that <m>f</m> is quadratic in the <m>x</m>-direction. More descriptively, as we increase the launch velocity while keeping the launch angle constant, the horizontal distance the object travels increases proportional to the square of the initial velocity.
    </p>

    <p>
      Similarly, if we fix the initial velocity at 150 feet per second, we can consider the distance as a function of the launch angle only. In this case we have
      <me>
        f(y) = \frac{150^2 \sin(2y)}{32}
      </me>
    </p>

    <p>
      We can again plot this curve on the surface by tracing out the points on the surface when <m>x=150</m>, as shown at right in <xref ref="trace1">Figure</xref>. The formula clearly show that <m>f</m> is sinusoidal in the <m>y</m>-direction. More descriptively, as we increase the launch angle while keeping the initial velocity constant, the horizontal distance traveled by the object is proportional to the sine of twice the launch angle.
    </p>
    <figure xml:id="trace1">
      <caption>The surface given by <m>z=f(x,y) = \frac{x^2 \sin(2y)}{g}</m> with traces <m>y=0.6</m> (in red) and <m>x=150</m> (in blue)</caption>
      <interactive title="interactive-trace1" platform="sage" width="85%" aspect="1:1">
        <slate surface="sage">
          scale=100
          plot11=line([(0,0,0),(scale,0,0)],color="black",thickness=3)+line([(0,0,0),(0,scale/100,0)],color="black",thickness=3)+line([(0,0,0),(0,0,scale*20)],color="black",thickness=3)
          var('x,y,z')
          d1=100
          d2=1
          g(x,y)=x^2*sin(2*y)/9.8
          plot11+=plot3d(g,(x,0,200),(y,0,pi/2),color="gray",plot_points=21,opacity=0.8,mesh=True,frame=False)
          plot11+=parametric_plot3d((x,0.6,g(x,0.6)),(x,0,200),color="red",thickness=3)
          plot11+=parametric_plot3d((150,y,g(150,y)),(y,0,pi/2),color="blue",thickness=3)
          plot11+=parametric_plot3d((x,pi/2+d2,g(x,0.6)),(x,0,200),color="red",thickness=3)
          plot11+=parametric_plot3d((200+d1,y,g(150,y)),(y,0,pi/2),color="blue",thickness=3)
          plot11+=parametric_plot3d((x,pi/2+d2,z),(x,0,200),(z,0,4100),color="gray",plot_points=5,opacity=0.0,mesh=True)
          plot11+=parametric_plot3d((200+d1,y,z),(y,0,pi/2),(z,0,4100),color="gray",plot_points=5,opacity=0.0,mesh=True)
          plot11+=text3d("x",(100,pi/2+d2,-300),fontsize=50)
          plot11+=text3d("z",(200+d1,pi/2+d2,4100),fontsize=50)
          plot11+=text3d("y",(200+d1,0.75,-300),fontsize=50)
          show(plot11,aspect_ratio=[1,100,0.05],viewpoint=[[-0.8958,0.2603,0.3602],77.78],camera_position=[-150.5634,-345.094,280.5231])
        </slate>
      </interactive>
    </figure>
    
    <!-- <figure xml:id="trace1">
      <caption>Left: The trace with <m>y = 0.6</m>. Right: The trace with <m>x = 150</m>. </caption>
      <sidebyside widths="50% 50%" margins="0%">
        <image source="images/fig_9_1_y_range"/>
        <image source="images/fig_9_1_x_range"/>
        </sidebyside>
    </figure> -->
    
    <p>
      The curves we define when we fix one of the independent variables in our two variable function are called <em>traces</em>. In <xref ref="trace1" />, we have made a copy of the trace off the side of the figure so you can see each trace as a curve on the proper 2D slice
    </p>

    <definition>
      <statement>
        <p>
          A <term>trace</term><idx><h>trace</h></idx> of a function <m>f</m> of two independent variables <m>x</m> and <m>y</m> in the <m>x</m> direction is a curve of the form <m>z = f(x,c)</m>, where <m>c</m> is a constant. Similarly, a <term>trace</term> of a function <m>f</m> of two independent variables <m>x</m> and <m>y</m> in the <m>y</m> direction is a curve of the form <m>z = f(c,y)</m>, where <m>c</m> is a constant. 
        </p>
      </statement>
    </definition>

    <p>
      Understanding trends in the behavior of functions of two variables can be challenging, as can sketching their graphs; traces help us with each of these tasks.
    </p>
    <activity>
      <introduction>
        <p>
          In the following activity, we investigate the use of traces to better understand a function through both tables and graphs.
        </p>
      </introduction>
      <task>
        <statement>
          <p>
            Identify the <m>y = 0.6</m> trace for the distance function <m>f</m> defined by <m>f(x,y) = \frac{x^2 \sin(2y)}{g}</m> by highlighting or circling the appropriate cells in <xref ref="T-9-1-range">Table</xref>.  Write a sentence to describe the behavior of the function along this trace.
          </p>
        </statement>
        <answer>
          <p>
            The <m>y = 0.6</m> trace is the vertical column in <xref ref="T-9-1-range">Table</xref> where <m>y = 0.6</m>. If the launch angle is <m>0.6</m> radians, as the initial velocity increases, the range of the object increases at an increasing rate.
          </p>
        </answer>
        <solution>
          <p>
            The <m>y = 0.6</m> trace is the vertical column in <xref ref="T-9-1-range">Table</xref> where <m>y = 0.6</m>. If the launch angle is <m>0.6</m> radians, as the initial velocity increases, the range of the object increases at an increasing rate.
          </p>
        </solution>
      </task>
      <task>
        <statement>
          <p>
            Identify the <m>x = 150</m> trace for the distance function by highlighting or circling the appropriate cells in <xref ref="T-9-1-range">Table</xref>.  Write a sentence to describe the behavior of the function along this trace.
          </p>
        </statement>
        <answer>
          <p>
            The <m>x = 150</m> trace is the horizontal row in <xref ref="T-9-1-range">Table</xref> where <m>x = 150</m>. If the initial velocity is <m>150 \frac{feet}{sec}</m>, as the launch angle increases from <m>0.2</m> radians to <m>0.8</m> radians, the range of the object increases. When the launch angle increases from <m>0.8</m> radians to <m>1.4</m>, the range of the object decreases.
          </p>
        </answer>
        <solution>
          <p>
            The <m>x = 150</m> trace is the horizontal row in <xref ref="T-9-1-range">Table</xref> where <m>x = 150</m>. If the initial velocity is <m>150 \frac{feet}{sec}</m>, as the launch angle increases from <m>0.2</m> radians to <m>0.8</m> radians, the range of the object increases. When the launch angle increases from <m>0.8</m> radians to <m>1.4</m>, the range of the object decreases.
          </p>
        </solution>
      </task>
      <task>
        <statement>
          <p>
            In the next several tasks, we will be looking at using traces to help us draw an accurate plot of the surface given by <m>z=g(x,y)=yx^2</m>. For our first task, find the equation for the <m>y=1</m> trace of <m>z=g(x,y)=yx^2</m> and draw a graph of the <m>y=1</m> trace on the corresponding face in <xref ref="tracey1" />.
          </p>
          <figure xml:id="tracey1">
            <caption>A bounding box for the region with <m>-1 \leq x,y,z \leq 1</m></caption>
            <interactive title="interactive-tracey1" platform="sage" width="85%" aspect="1:1">
              <slate surface="sage">
                var('t,s')
                plot15=parametric_plot3d((1,s,t),(s,-1,1),(t,-1,1),color="gray",opacity=0.2,mesh=True,plot_points=5,aspect_ratio=[1,1,0.5])
                plot15+=parametric_plot3d((-1,s,t),(s,-1,1),(t,-1,1),color="gray",opacity=0.2,mesh=True,plot_points=5)
                plot15+=parametric_plot3d((s,1,t),(s,-1,1),(t,-1,1),color="gray",opacity=0.2,mesh=True,plot_points=5)
                plot15+=parametric_plot3d((s,-1,t),(s,-1,1),(t,-1,1),color="gray",opacity=0.2,mesh=True,plot_points=5)
                show(plot15)
              </slate>
            </interactive>
          </figure>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Find the equation for each of the following traces and draw a plot of the trace on the corresponding face in <xref ref="tracey1" />.
            <ul>
              <li> <m>y=-1</m> </li>
              <li> <m>x=1</m> </li>
              <li> <m>x=-1</m> </li>
            </ul>
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Draw a few traces (at least three more) that correspond to values in the middle of the plot to fill in a plot of the surface given by <m>z=x^2y</m>.
          </p>
        </statement>
      </task>
    </activity>
    <p>
      The previous activity shows how drawing traces on a plot of a surface can give the viewer more information on the orientation of the graph. You can see how it is harder to distinguish finer features of a surface plot without traces by toggling the check box in <xref ref="traceonoff" />. When drawing plots by hand, it is very important to use parallel structure to make it easier for the viewer to orient the traces as being in a direction parallel to one of the coordinate axes. It may take time for you to feel comfortable drawing these kinds of features by hand but good visual representations of surfaces and their features will be very valuable in our work for the next several chapters. 
    </p>
    <figure xml:id="traceonoff">
      <caption>A plot of the distance surface with or without traces for perspective</caption>
      <interactive title="interactive-traceonoff" platform="sage" width="85%" aspect="1:1">
        <slate surface="sage">
          var('x,y')
          g(x,y)=x^2*sin(2*y)/32
          @interact
          def traceplot(s=checkbox(True,label="Show traces")):
              plot16=plot3d(g,(x,0,200),(y,0,pi/2),color="gray",plot_points=21,mesh=s,opacity=0.8)
              show(plot16,aspect_ratio=[1,100,0.15],viewpoint=[[-0.792,0.3576,0.4949],84.75],camera_position=[-200.2301,-189.6884,234.3567])
        </slate>
      </interactive>
    </figure>
    <!-- <activity xml:id="A-9-1-6">
      <statement>
        <p>
          In the following questions, we investigate the use of traces to better understand a function through both tables and graphs.
          <ol marker="a.">
            <li>
              <p>
                Identify the <m>y = 0.6</m> trace for the distance function <m>f</m> defined by <m>f(x,y) = \frac{x^2 \sin(2y)}{g}</m> by highlighting or circling the
                    appropriate cells in <xref ref="T-9-1-range">Table</xref>.  Write a sentence to describe the behavior of the function along this trace.
              </p>
            </li>

            <li>
              <p>
                Identify the <m>x = 150</m> trace for the distance function by
                    highlighting or circling the appropriate cells in <xref ref="T-9-1-range">Table</xref>.  Write a sentence to describe the behavior of the function along this trace.

                <figure xml:id="F-9-1-traces-activity-1">
                  <caption>Coordinate axes to sketch traces.</caption>
                  <image width="50%" source="images/fig_9_1_activity_axes"/>
                </figure>

              </p>
            </li>

            <li>
              <p>
                For the function <m>g</m> defined by <m>g(x,y) = x^2 + y^2 + 1</m>, explain the type of function that each trace in the <m>x</m> direction will be (keeping <m>y</m> constant). Plot the <m>y=-4</m>, <m>y=-2</m>, <m>y=0</m>, <m>y=2</m>, and <m>y=4</m> traces in 3-dimensional coordinate system provided in <xref ref="F-9-1-traces-activity-1">Figure</xref>.
              </p>
            </li>

            <li>
              <p>
                For the function <m>g</m> defined by <m>g(x,y) = x^2 + y^2 + 1</m>, explain the type of function that each trace in the <m>y</m> direction will be (keeping <m>x</m> constant). Plot the <m>x=-4</m>, <m>x=-2</m>, <m>x=0</m>, <m>x=2</m>, and <m>x=4</m> traces in 3-dimensional coordinate system in <xref ref="F-9-1-traces-activity-1">Figure</xref>.
              </p>
            </li>

            <li>
              <p>
                Describe the surface generated by the function <m>g</m>.
              </p>
            </li>
          </ol>
        </p>
      </statement>

      <answer>
        <p>
          <ol marker="a.">
            <li>
              <p>
                The <m>y = 0.6</m> trace is the vertical column in <xref ref="T-9-1-range">Table</xref> where <m>y = 0.6</m>. If the launch angle is <m>0.6</m> radians, as the initial velocity increases, the range of the object increases at an increasing rate.
              </p>
            </li>
  
            <li>
              <p>
                The <m>x = 150</m> trace is the horizontal row in <xref ref="T-9-1-range">Table</xref> where <m>x = 150</m>. If the initial velocity is <m>150 \frac{feet}{sec}</m>, as the launch angle increases from <m>0.2</m> radians to <m>0.8</m> radians, the range of the object increases. When the launch angle increases from <m>0.8</m> radians to <m>1.4</m>, the range of the object decreases.
              </p>
            </li>
  
            <li>
              <p>
                If <m>y</m> is a constant, c, <m>g(x,y)=g(x,c)=x^{2}+c^{2}+1</m>. This is a quadratic function with a vertex of <m>(0,c^{2}+1)</m> that opens upwards. These traces are parallel to the xz-plane
              </p>
            </li>
  
            <li>
              <p>
                If <m>x</m> is a constant, c, <m>g(x,y)=g(c,y)=c^{2}+y^{2}+1</m>. This is a quadratic function with a vertex of <m>(c^{2}+1,0)</m> that opens upwards. These traces are parallel to the yz-plane
              </p>
            </li>
  
            <li>
              <p>
                This surface is shaped like a bowl that opens up in the positive z-direction.
              </p>
            </li>
          </ol>
        </p>
      </answer>
<solution>
    <p>
      <ol marker="a.">
        <li>
          <p>
            The <m>y = 0.6</m> trace is the vertical column in <xref ref="T-9-1-range">Table</xref> where <m>y = 0.6</m>. If the launch angle is <m>0.6</m> radians, as the initial velocity increases, the range of the object increases at an increasing rate.
          </p>
        </li>

        <li>
          <p>
            The <m>x = 150</m> trace is the horizontal row in <xref ref="T-9-1-range">Table</xref> where <m>x = 150</m>. If the initial velocity is <m>150 \frac{feet}{sec}</m>, as the launch angle increases from <m>0.2</m> radians to <m>0.8</m> radians, the range of the object increases. When the launch angle increases from <m>0.8</m> radians to <m>1.4</m>, the range of the object decreases.
          </p>
        </li>

        <li>
          <p>
            If <m>y</m> is a constant, c, <m>g(x,y)=g(x,c)=x^{2}+c^{2}+1</m>. This is a quadratic function with a vertex of <m>(0,c^{2}+1)</m> that opens upwards. These traces are parallel to the xz-plane
          </p>
        </li>

        <li>
          <p>
            If <m>x</m> is a constant, c, <m>g(x,y)=g(c,y)=c^{2}+y^{2}+1</m>. This is a quadratic function with a vertex of <m>(c^{2}+1,0)</m> that opens upwards. These traces are parallel to the yz-plane
          </p>
        </li>

        <li>
          <p>
            This surface is shaped like a bowl that opens up in the positive z-direction.
          </p>
        </li>
      </ol>
    </p>
</solution>
    </activity> -->

  </subsection>
  <subsection>
    <title>Contour Maps and Level Curves</title>
    <p>
      As you saw in the previous subsection, traces give important information about how a slice of a surface looks like when holding one of the inputs constant. This corresponded to looking at the intersection of a fundamental plane of the form <m>x=a</m> or <m>y=b</m> with the surface given by <m>z=f(x,y)</m>. These fundamental planes are oriented vertically when we consider a conventional right handed coordinate system. In this section we will explore the intersection of a surface given by <m>z=f(x,y)</m> with a fundamental plane of the form <m>z=c</m>. This will correspond to looking at the points on the surface with a fixed height (specifically <m>z=c</m>). 
    </p>
    <p>
      You may have seen topographic maps such as the one of the Porcupine Mountains in the upper peninsula of Michigan shown in <xref ref="F-9-1-porcupine">Figure</xref>.<fn>Map source: Michigan Department of Natural Resources, with permission of the Michigan DNR and Bob Wild.</fn> The curves on these maps show the locations with a particular altitude (as labeled on the line). The space between these curves also depicts change in altitude: curves on the topographic map that are close together signify steep ascents or descents, while curves that are far apart indicate slower changes in elevation. Thus, these topographic maps with curves of constant elevation tell us a lot about three-dimensional surfaces. Mathematically, if <m>f(x,y)</m> represents the altitude at the point <m>(x,y)</m>, then each of the curves with constant elevation is the graph of an equation of the form <m>f(x,y) = k</m>, for some constant <m>k</m>.
    </p>

    <figure xml:id="F-9-1-porcupine">
      <caption>Topographical map of the Porcupine Mountains.</caption>
      <image width="100%" source="images/9_1_porcupine_crop"/>
    </figure>

    <activity xml:id="A-9-1-8">
      <introduction>
        <p>
          Use the topographical map of the Porcupine Mountains in <xref ref="F-9-1-porcupine">Figure</xref> to answer the following questions. Note that points of interest are sometimes marked with an X and have their altitude listed.
        </p>
      </introduction>
      <task>
        <statement>
          <p>
            Identify the highest and lowest points you can find.
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Describe how your elevation would change if you walked in a straight line from the lowest to the highest elevation points. You may want to sketch a plot of the elevation along your path. 
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            If you walk along the Big Carp River Trail (in the top left part of <xref ref="F-9-1-porcupine">Figure</xref>), describe which parts of the trail will have steep increases in elevation and which parts you think will be the most like level ground. 
          </p>
        </statement>
      </task>
      <!--       <statement>
              <p>
                On the topographical map of the Porcupine Mountains in <xref ref="F-9-1-porcupine">Figure</xref>,
                <ol marker="a.">
                  <li>
                    <p>
                      identify the highest and lowest points you can find;
                    </p>
                  </li>

                  <li>
                    <p>
                      from a point of your choice, determine a path of steepest ascent that leads to the highest point;
                    </p>
                  </li>

                  <li>
                    <p>
                      from that same initial point, determine the least steep path that leads to the highest point.
                    </p>
                  </li>
                </ol>
              </p>
            </statement>

            <answer>
              <p>
                <ol marker="a.">
                  <li>
                    <p>
                      The highest point is Summit Peak with an elevation of 593. The lowest point is in the upper left corner of the contour map with an elevation below 200.
                    </p>
                  </li>
        
                  <li>
                    <p>
                      From the chosen point, the steepest ascent will be in the direction perpendicular to the contour line with the next highest elevation.
                    </p>
                  </li>
        
                  <li>
                    <p>
                      From the chosen point, the least steep path will be in the direction that is closest to parallel to the contour line with the next lowest elevation.
                    </p>
                  </li>
                </ol>
              </p>
            </answer>
      <solution>
        <p>
          <ol marker="a.">
            <li>
              <p>
                The highest point is Summit Peak with an elevation of 593. The lowest point is in the upper left corner of the contour map with an elevation below 200.
              </p>
            </li>

            <li>
              <p>
                From the chosen point, the steepest ascent will be in the direction perpendicular to the contour line with the next highest elevation.
              </p>
            </li>

            <li>
              <p>
                From the chosen point, the least steep path will be in the direction that is closest to parallel to the contour line with the next lowest elevation.
              </p>
            </li>
          </ol>
        </p>
      </solution> -->
    </activity>

    <p>
      Curves on a surface that describe points at the same height or level are called <em>level curves</em> and as you saw in the topographic map above, a plot with level curves can be useful for representing information on a surface using just a 2D graph. 
    </p>

    <definition>
      <statement>
        <p>
          A <term>level curve<idx><h>level curve</h></idx> (or contour)</term> of a function <m>f</m> of two independent variables <m>x</m> and <m>y</m> is a curve of the form <m>k = f(x,y)</m>, where <m>k</m> is a constant.
        </p>
      </statement>
    </definition>

    <p>
      Topographical maps can be used to create a three-dimensional surface from the two-dimensional contours or level curves. For example, level curves of the distance function defined by <m>f(x,y) = \frac{x^2 \sin(2y)}{32}</m> plotted in the <m>xy</m>-plane are shown at in <xref ref="contour1">Figure</xref>. You can change the number of contours in the plot by moving the slider at the top of <xref ref="contour1">Figure</xref>. Additionally, you will sometimes see a legend for contours shown when different colors are used or a contour plot with different colors and shading filling in the region between contours. You can toggle these options in the contour plot below by clicking on the checkbox next to the different options. 
    </p>
    <figure xml:id="contour1">
      <caption>A contour plot of <m>f(x,y) = \frac{x^2 \sin(2y)}{32}</m></caption>
      <interactive title="interactive-contour1" platform="sage" width="100%" aspect="1:1.15">
        <slate surface="sage">
          var('x,y,z')
          @interact
          def contourexpanded(s1=checkbox(False,label="Fill in between contours"),s2=checkbox(False,label="Show Contour Legend"),n=slider(3,20,1,default=9,label="Number of Contours",display_value=False)):
            g(x,y)=x^2*sin(2*y)/32
            c=[1350/n*i for i in range(n)]
            plot17=contour_plot(g(x,y),(x,0,200),(y,0,pi/2),contours=c,aspect_ratio=100,fill=s1,labels=True,label_fmt="%1.0f",colorbar=s2,axes_labels=["$x$","$y$"])
            show(plot17)       
        </slate>
      </interactive>  
    </figure>
    <p>
      If we lift these contours and plot them at their respective heights, then we get a picture of the surface itself, as illustrated at right in <xref ref="contour2">Figure</xref>.
    </p>
    <figure xml:id="contour2">
      <caption>A plot of the contours of <m>f(x,y) = \frac{x^2 \sin(2y)}{32}</m> at the appropriate heights</caption>
      <interactive title="interactive-contour2" platform="sage" width="100%" aspect="1:1">
        <slate surface="sage">
          var('x,y,z,t,s')
          g(x,y)=x^2*sin(2*y)/32
          s=1
          plot18=plot3d(g,(x,0,200),(y,0,pi/2),color="gray",plot_points=21,opacity=0.1*s)
          c=["pink","red","orange","yellow","green","blue","indigo","violet"]
          for i in range(8):
            h=150*i
            tv=arcsin(32*h/(200^2))/2
            plot18+=parametric_plot3d((sqrt(32*h/sin(2*t)),t,h),(t,tv,pi/2-tv),color=c[i],thickness=2)
            plot18+=text3d(str(h),(sqrt(32*h/1)-25,pi/4,h),color=c[i],fontsize=15)
          show(plot18,aspect_ratio=[1,100,0.15],viewpoint=[[-0.9811,0.124,0.1483],80.88],camera_position=[-13.4812,-314.7077,166.7816])
        </slate>
      </interactive>
    </figure>
    <!-- <figure xml:id="F-9-1-contours-1">
      <caption>Left: Level curves. Right: Level curves at appropriate heights.</caption> 
      <sidebyside widths="50% 50%">   
        <image source="images/fig_9_1_contour_1"/>    
        <image source="images/fig_9_1_contour_2"/>
        </sidebyside>
    </figure> -->
    

    <p>
      The use of level curves and traces can help us construct the graph of a function of two variables. For the surface definded by <m>z=f(x,y) = \frac{x^2 \sin(2y)}{32}</m> we can plot a grid of <m>x</m>-traces, <m>y</m>-traces, and contours to get a good idea of what the surface looks like as shown in <xref ref="contour3" />. If you compare the paths plotted in <xref ref="contour3" /> to <xref ref="zfnxy" />, you will see that the mesh shown on the surfaces in most plots IS a grid of traces of contours and that is how the orientation of surfaces is typically drawn by computer generated plots.
    </p>
    <figure xml:id="contour3">
      <caption>A plot of the contours and traces of <m>f(x,y) = \frac{x^2 \sin(2y)}{32}</m> at the appropriate values</caption>
      <interactive title="interactive-contour3" platform="sage" width="85%" aspect="1:1">
        <slate surface="sage">
          var('x,y,z,t,s')
          g(x,y)=x^2*sin(2*y)/32
          s=0
          plot19=plot3d(g,(x,0,200),(y,0,pi/2),color="gray",plot_points=21,opacity=0.1*s)
          c=[150*i for i in range(9)]
          for h in c:
              tv=arcsin(32*h/(200^2))/2
              plot19+=parametric_plot3d((sqrt(32*h/sin(2*t)),t,h),(t,tv,pi/2-tv),color="green",thickness=2)
          c2=[pi/2*i/8 for i in range(1,9)]
          for yv in c2:
              plot19+=parametric_plot3d((t,yv,g(t,yv)),(t,0,200),color="red",thickness=2)
          c3=[200*i/8 for i in range(1,9)]
          for xv in c3:
              plot19+=parametric_plot3d((xv,t,g(xv,t)),(t,0,pi/2),color="blue",thickness=2)
          show(plot19,aspect_ratio=[1,100,0.15],viewpoint=[[-0.8451,0.2673,0.4629],68.68],camera_position=[-116.3915,-229.3542,311.024])
        </slate>
      </interactive>
    </figure>

    <activity xml:id="A-9-1-9">
      <introduction>
        <p>
          In this activity, we will be making contour plots by hand and looking at how the spacing of contours in your plot should give an idea about how different surface shapes can be distinguished. 
        </p>
        <figure xml:id="F-9-1-contour-activity">
          <caption>Left: Level curves for <m>f(x,y) = x^2+y^2</m>. Right: Level curves for <m>g(x,y) = \sqrt{x^2+y^2}</m>.</caption>
          <sidebyside widths="50% 50%" margins="0%">
          <image width="45%" label="img-fig_9_1_activity_empty_1">
            <sageplot>
              from matplotlib import ticker
              var('x,y')
              tic=[i for i in range(-6,7)]
              plot21=point((0,0),size=0,color="black",gridlines=True,ymin=-6,ymax=6,xmin=-6,xmax=6,ticks=[tic,tic],axes_labels=["$x$","$y$"],aspect_ratio=1,frame=False,tick_formatter=(ticker.NullFormatter(),ticker.NullFormatter()))
              plot21
            </sageplot>
          </image>
          <image width="45%" label="img-fig_9_1_activity_empty_2">
            <sageplot>
              from matplotlib import ticker
              var('x,y')
              tic=[i for i in range(-6,7)]
              plot21=point((0,0),size=0,color="black",gridlines=True,ymin=-6,ymax=6,xmin=-6,xmax=6,ticks=[tic,tic],axes_labels=["$x$","$y$"],aspect_ratio=1,frame=False,tick_formatter=(ticker.NullFormatter(),ticker.NullFormatter()))
              plot21
            </sageplot>
          </image>
          <!-- <image source="images/fig_9_1_activity_empty_1"/>
          <image source="images/fig_9_1_activity_empty_2"/> -->
          </sidebyside>
        </figure>

      </introduction>
      <task>
        <statement>
          <p>
            Let <m>f(x,y) = x^2+y^2</m>. Draw the level curves <m>f(x,y) = k</m> for <m>k=1</m>, <m>k=2</m>, <m>k=3</m>, and <m>k=4</m> on the left set of axes given in <xref ref="F-9-1-contour-activity">Figure</xref>. (You decide on the scale of the axes.) Explain what the surface defined by <m>f</m> looks like.
          </p>
        </statement>
        <answer>
          <p>
            Each level curve will be a circle with a radius of <m>\sqrt{k}</m>. As <m>k</m> increases, the radius of the circle increases but at a decreasing rate. This surface is a bowl with a vertex at <m>(0,0,0)</m> that opens up.
          </p>
        </answer>
        <solution>
          <p>
            Each level curve will be a circle with a radius of <m>\sqrt{k}</m>. As <m>k</m> increases, the radius of the circle increases but at a decreasing rate. This surface is a bowl with a vertex at <m>(0,0,0)</m> that opens up.
          </p>
        </solution>
      </task>
      <task>
        <statement>
          <p>
            Let <m>g(x,y) = \sqrt{x^2+y^2}</m>. Draw the level curves <m>g(x,y) = k</m> for <m>k=1</m>, <m>k=2</m>, <m>k=3</m>, and <m>k=4</m> on the right set of axes given in <xref ref="F-9-1-contour-activity">Figure</xref>. You should use the same scale on these axes as in the previous task. Explain what the surface defined by <m>g</m> looks like
          </p>
        </statement>
        <answer>
          <p>
            Each level curve will be a circle with a radius of <m>k</m>. As <m>k</m> increases, the radius of the circle increases at a constant rate. This surface is a cone with a vertex at <m>(0,0,0)</m> that opens up.
          </p>
        </answer>
        <solution>
          <p>
            Each level curve will be a circle with a radius of <m>k</m>. As <m>k</m> increases, the radius of the circle increases at a constant rate. This surface is a cone with a vertex at <m>(0,0,0)</m> that opens up.
          </p>
        </solution>
      </task>
      <task>
        <statement>
          <p>
            Compare and contrast the graphs of <m>f</m> and <m>g</m>. How are they alike? How are they different? Use traces for each function to help answer these questions.
          </p>
        </statement>
        <answer>
          <p>
            Both of these surfaces have a vertex at <m>(0,0,0)</m> and open up. The radii of the level curves for <m>f(x,y)</m> increase at a decreasing rate as <m>k</m> increases, while the radii of the level curves of <m>g(x,y)</m> increases at a decreasing rate as <m>k</m> increases.
          </p>
        </answer>
        <solution>
          <p>
            Both of these surfaces have a vertex at <m>(0,0,0)</m> and open up. The radii of the level curves for <m>f(x,y)</m> increase at a decreasing rate as <m>k</m> increases, while the radii of the level curves of <m>g(x,y)</m> increases at a decreasing rate as <m>k</m> increases.
          </p>
        </solution>
      </task>
    </activity>
    <p>
      The traces and level curves of a function of two variables are curves in space. Traces are much easier to parameterize as a curve in space because one coordinate is fixed and the other input can act as the parameter. For example, the trace with <m>y=b</m> of the surface given by <m>z=f(x,y)</m> will be parameterized by <m>\vr(t)\langle t,b,f(t,b)\rangle</m> because the <m>z</m>-coordinate can be expressed in terms of the fixed coordinate and the other coordinate (as the parameter). Parameterizing contours can be quite difficult and often relies on knowing the particular shape of the contours. Remember that it may not be possible to express a curve of the form <m> k=f(x,y)</m> with one coordinate as a function of the other.
    </p>

  </subsection>

  <subsection>
    <title>A gallery of functions</title>
    <p>
      We end this section by considering a collection of functions and illustrating their graphs and some level curves.
    </p>
    <figure xml:id="contourgallery">
      <caption>A plot of various functions and their contour plots</caption>
      <interactive title="interactive-contourgallery" platform="sage" width="100%" aspect="1:1.85">
        <slate surface="sage">
          from sage.plot.plot3d.plot3d import axes
          var('x,y,z,t,s')
          surfaces=["Surface 1","Surface 2","Surface 3","Surface 4","Surface 5","Surface 6","Surface 7"]
          @interact
          def surfacecontourcompare(sb=selector(surfaces,label="Surface Options:")):
            var('t,s,x,y,z')
            scale=2
            d=2
            plot20=axes(scale,1,color="black",frame=False,aspect_ratio=1)+text3d("x",(scale+0.5,0,0),fontsize=30)+text3d("y",(0,scale+0.5,0),fontsize=30)+text3d("z",(0,0,scale+0.5),fontsize=30)
            if sb==surfaces[0]:
              f(x,y)=x^2+y^2
              plot20+=parametric_plot3d((s*cos(t),s*sin(t),s^2),(s,0,sqrt(2)),(t,0,2*pi),color="gray",opacity=0.8,plot_points=31,mesh=True)
              plot21=contour_plot(f(x,y),(x,-2,2),(y,-2,2),axes_labels=["x","y"])
              show(latex('z=x^2+y^2'))
              show(plot20)
              show(plot21)
            if sb==surfaces[1]:
              f(x,y)=sqrt(x^2+y^2)
              plot20+=parametric_plot3d((s*cos(t),s*sin(t),s),(s,0,sqrt(2)),(t,0,2*pi),color="gray",opacity=0.8,plot_points=31,mesh=True)
              plot21=contour_plot(f(x,y),(x,-2,2),(y,-2,2),axes_labels=["x","y"])
              show(latex('z=sqrt{x^2+y^2}'))
              show(plot20)
              show(plot21)
            if sb==surfaces[2]:
              f(x,y)=1-x^2-y^2
              plot20+=parametric_plot3d((s*cos(t),s*sin(t),1-s^2),(s,0,sqrt(2)),(t,0,2*pi),color="gray",opacity=0.8,plot_points=31,mesh=True)
              plot21=contour_plot(f(x,y),(x,-2,2),(y,-2,2),axes_labels=["x","y"])
              show(latex('z=1-x^2-y^2'))
              show(plot20)
              show(plot21)
            if sb==surfaces[3]:
              f(x,y)=(x^2-y^2)/2
              plot20+=parametric_plot3d((s,t,(s^2-t^2)/2),(s,-2,2),(t,-2,2),color="gray",opacity=0.8,plot_points=31,mesh=True)
              plot21=contour_plot(f(x,y),(x,-2,2),(y,-2,2),axes_labels=["x","y"])
              show(latex('z=(x^2-y^2)/2'))
              show(plot20)
              show(plot21)
            if sb==surfaces[4]:
              f(x,y)=sin(x)+sin(y)
              d=6
              plot20+=parametric_plot3d((s,t,f(s,t)),(s,-d,d),(t,-d,d),color="gray",opacity=0.8,plot_points=31,mesh=True)
              plot21=contour_plot(f(x,y),(x,-d,d),(y,-d,d),axes_labels=["x","y"])
              show(latex('z=sin(x)+sin(y)'))
              show(plot20)
              show(plot21)
            if sb==surfaces[5]:
              f(x,y)=y^2-x^3+x
              plot20+=parametric_plot3d((s,t,f(s,t)),(s,-d,d),(t,-d,d),color="gray",opacity=0.8,plot_points=31,mesh=True,aspect_ratio=[1,1,0.3])
              plot21=contour_plot(f(x,y),(x,-d,d),(y,-d,d),axes_labels=["x","y"])
              show(latex('z=y^2-x^3+x'))
              show(plot20)
              show(plot21)
            if sb==surfaces[6]:
              f(x,y)=8*x*y*exp(-x^2-y^2)
              plot20+=parametric_plot3d((s,t,f(s,t)),(s,-d,d),(t,-d,d),color="gray",opacity=0.8,plot_points=31,mesh=True,aspect_ratio=[1,1,1])
              plot21=contour_plot(f(x,y),(x,-d,d),(y,-d,d),axes_labels=["x","y"])
              show(latex('z=xye^(-x^2-y^2)'))
              show(plot20)
              show(plot21)
        </slate>
      </interactive>
    </figure>
    <!-- <figure>
      <caption><m>z=x^2+y^2</m></caption>
      <sidebyside widths="43% 43%" margins="0%">
      <image source="images/zisr2"/>
      <image source="images/zisr2_contours"/>
      </sidebyside>
    </figure>

    <figure>
      <caption><m>z=4-(x^2+y^2)</m></caption>
      <sidebyside widths="43% 43%" margins="0%">
      <image source="images/zis4r2"/>
      <image source="images/zis4r2_contours"/>
      </sidebyside>
    </figure>

    <figure>
      <caption><m>z=\sqrt{x^2+y^2}</m></caption>
      <sidebyside widths="43% 43%" margins="0%">
      <image source="images/cone"/>
      <image source="images/cone_contours"/>
      </sidebyside>
    </figure>

    <figure>
      <caption><m>z=x^2-y^2</m></caption>
      <sidebyside widths="43% 43%" margins="0%">
      <image source="images/saddle"/>
      <image source="images/saddle_contours"/>
      </sidebyside>
    </figure>

    <figure>
      <caption><m>z=\sin(x)+\sin(y)</m></caption>
      <sidebyside widths="43% 43%" margins="0%">
      <image source="images/sinxy"/>
      <image source="images/sinxy_contours"/>
      </sidebyside>
    </figure>

    <figure>
      <caption><m>z=y^2 - x^3 + x</m></caption>
      <sidebyside widths="43% 43%" margins="0%">
      <image source="images/elliptic"/>
      <image source="images/elliptic_contours"/>
      </sidebyside>
    </figure>

    <figure>
      <caption><m>z=xye^{-x^2-y^2}</m></caption>
      <sidebyside widths="43% 43%" margins="0%">
      <image source="images/exp"/>
      <image source="images/exp_contours"/>
      </sidebyside>
    </figure> -->


  </subsection>

  <subsection>
    <title>Summary</title>
    <ul>
      <li>
        <p>
          A function <m>f</m> of several variables is a rule that assigns a unique number to an ordered collection of independent inputs.  The domain of a function of several variables is the set of all inputs for which the function is defined.
        </p>
      </li>
      <li>
        <p>
          A trace of a function <m>f</m> of two independent variables <m>x</m> and <m>y</m> is a curve of the form <m>z = f(c,y)</m> or <m>z = f(x,c)</m>, where <m>c</m> is a constant. A trace tells us how the function depends on a single independent variable if we treat the other independent variable as a constant.
        </p>
      </li>
      <li>
        <p>
          A level curve of a function <m>f</m> of two independent variables <m>x</m> and <m>y</m> is a curve of the form <m>k = f(x,y)</m>, where <m>k</m> is a constant. A level curve describes the set of inputs that lead to a specific output of the function.
        </p>
      </li>
    </ul>

    </subsection>
<xi:include href="./exercises/ez-S_mv_functions.ptx" />
      
</section>
